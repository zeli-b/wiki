<script src="https://cdn.jsdelivr.net/npm/cytoscape@3.32.0/dist/cytoscape.min.js"></script>

<div id="cy" style="width: 100%; height: 600px; display: block;"></div>

<script>

async function main() {
	const req = await fetch("/connection.json");
	const elements = await req.json();
	console.log(elements);
	
	const cy = cytoscape({
	    container: document.getElementById('cy'),
	    elements: elements,
	    style: [
	        {
	            selector: 'node',
	            style: {
	                label: 'data(name)',
	                "text-valign": "center",
	                "text-halign": "center",
	                width: "10px",
	                height: "10px",
	                "font-size": "6px"
	            }
	        },
	        {
	            selector: "edge",
	            style: {
	                width: "2px"
	            }
	        }
	    ],
	    layout: {
  name: 'cose', // Or 'cose' if cose-bilkent is registered as the default CoSE

  nodeRepulsion: 5000,        // Slightly higher might be needed if fcose's default is too tight.
  idealEdgeLength: 100,
  edgeElasticity: 0.45,
  nestingFactor: 0.1,
  gravity: 0.3,               // Note: gravity values are scaled differently than fcose.
  numIter: 1500,              // Might need more iterations than fcose for similar quality.
  animate: 'end',
  animationDuration: 500,
  fit: true,
  padding: 50,
  randomize: true,
  nodeDimensionsIncludeLabels: true,
  tile: true,
  tilingPaddingVertical: 20,
  tilingPaddingHorizontal: 20,
  // `cose-bilkent` doesn't have a 'quality' parameter like `fcose`.
}
	})
}

main();
</script>